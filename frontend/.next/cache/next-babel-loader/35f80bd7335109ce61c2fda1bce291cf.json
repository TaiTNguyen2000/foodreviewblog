{"ast":null,"code":"var _jsxFileName = \"D:\\\\Project Files\\\\foodreviewblog-main\\\\frontend\\\\components\\\\auth\\\\SigninComponent.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useState, useEffect } from 'react';\nimport { signin, authenticate, isAuth } from '../../actions/auth';\nimport Router from 'next/router';\n\nconst SigninComponent = () => {\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    email: '',\n    password: '',\n    error: '',\n    loading: false,\n    message: '',\n    showForm: true\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    message,\n    showForm\n  } = values;\n  useEffect(() => {\n    isAuth() && Router.push(`/`);\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault(); // console.table({ name, email, password, error, loading, message, showForm });\n\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      loading: true,\n      error: false\n    }));\n    const user = {\n      email,\n      password\n    };\n    signin(user).then(data => {\n      if (data.error) {\n        setValues(_objectSpread(_objectSpread({}, values), {}, {\n          error: data.error,\n          loading: false\n        }));\n      } else {\n        // save user token to cookie\n        // save user info to localstorage\n        // authenticate user\n        authenticate(data, () => {\n          if (isAuth() && isAuth().role === 1) {\n            Router.push(`/admin`);\n          } else {\n            Router.push(`/user`);\n          }\n        });\n      }\n    });\n  };\n\n  const handleChange = name => e => {\n    setValues(_objectSpread(_objectSpread({}, values), {}, {\n      error: false,\n      [name]: e.target.value\n    }));\n  };\n\n  const showLoading = () => loading ? __jsx(\"div\", {\n    className: \"alert alert-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, \"Loading...\") : '';\n\n  const showError = () => error ? __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, error) : '';\n\n  const showMessage = () => message ? __jsx(\"div\", {\n    className: \"alert alert-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 15\n    }\n  }, message) : '';\n\n  const signinForm = () => {\n    return __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }\n    }, __jsx(\"input\", {\n      value: email,\n      onChange: handleChange('email'),\n      type: \"email\",\n      className: \"form-control\",\n      placeholder: \"Nh\\u1EADp email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, __jsx(\"input\", {\n      value: password,\n      onChange: handleChange('password'),\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Nh\\u1EADp m\\u1EADt kh\\u1EA9u\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    })), __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }\n    }, __jsx(\"button\", {\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }\n    }, \"\\u0110\\u0103ng nh\\u1EADp\")));\n  };\n\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, showError(), showLoading(), showMessage(), showForm && signinForm());\n};\n\nexport default SigninComponent;","map":{"version":3,"sources":["D:/Project Files/foodreviewblog-main/frontend/components/auth/SigninComponent.js"],"names":["useState","useEffect","signin","authenticate","isAuth","Router","SigninComponent","values","setValues","email","password","error","loading","message","showForm","push","handleSubmit","e","preventDefault","user","then","data","role","handleChange","name","target","value","showLoading","showError","showMessage","signinForm"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport { signin, authenticate, isAuth } from '../../actions/auth';\nimport Router from 'next/router';\n\nconst SigninComponent = () => {\n  const [values, setValues] = useState({\n    email: '',\n    password: '',\n    error: '',\n    loading: false,\n    message: '',\n    showForm: true,\n  });\n\n  const { email, password, error, loading, message, showForm } = values;\n\n  useEffect(() => {\n    isAuth() && Router.push(`/`);\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // console.table({ name, email, password, error, loading, message, showForm });\n    setValues({ ...values, loading: true, error: false });\n    const user = { email, password };\n\n    signin(user).then((data) => {\n      if (data.error) {\n        setValues({ ...values, error: data.error, loading: false });\n      } else {\n        // save user token to cookie\n        // save user info to localstorage\n        // authenticate user\n        authenticate(data, () => {\n          if (isAuth() && isAuth().role === 1) {\n            Router.push(`/admin`);\n          } else {\n            Router.push(`/user`);\n          }\n        });\n      }\n    });\n  };\n\n  const handleChange = (name) => (e) => {\n    setValues({ ...values, error: false, [name]: e.target.value });\n  };\n\n  const showLoading = () =>\n    loading ? <div className='alert alert-info'>Loading...</div> : '';\n  const showError = () =>\n    error ? <div className='alert alert-danger'>{error}</div> : '';\n  const showMessage = () =>\n    message ? <div className='alert alert-info'>{message}</div> : '';\n\n  const signinForm = () => {\n    return (\n      <form onSubmit={handleSubmit}>\n        <div className='form-group'>\n          <input\n            value={email}\n            onChange={handleChange('email')}\n            type='email'\n            className='form-control'\n            placeholder='Nhập email'\n          />\n        </div>\n\n        <div className='form-group'>\n          <input\n            value={password}\n            onChange={handleChange('password')}\n            type='password'\n            className='form-control'\n            placeholder='Nhập mật khẩu'\n          />\n        </div>\n\n        <div>\n          <button className='btn btn-primary'>Đăng nhập</button>\n        </div>\n      </form>\n    );\n  };\n\n  return (\n    <React.Fragment>\n      {showError()}\n      {showLoading()}\n      {showMessage()}\n      {showForm && signinForm()}\n    </React.Fragment>\n  );\n};\n\nexport default SigninComponent;\n"]},"metadata":{},"sourceType":"module"}